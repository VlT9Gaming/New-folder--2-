<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>MMD Models</title>
  <meta name="description" content="A-Frame MMD loader component">
  <script src="https://aframe.io/releases/0.7.1/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/kripken/ammo.js/dcab07bf0e7f2b4b64c01dc45da846344c8f50be/builds/ammo.js"></script>
  <script src="https://cdn.rawgit.com/takahirox/aframe-outline/v1.1.1/build/aframe-outline.min.js"></script>
  <script src="https://cdn.rawgit.com/takahirox/a-mmd/v1.0.3/build/a-mmd.min.js"></script>
  <script src="https://unpkg.com/aframe-audioanalyser-component@5.4.0/dist/aframe-audioanalyser-component.min.js"></script>
</head>

<body>


  <a-scene antialias="true">
    <a-assets>
      <img id="sky" crossorigin="anonymous"
        src="https://cdn.rawgit.com/aframevr/aframe/v0.7.1/examples/primitives/models/peach-gradient.jpg">
    </a-assets>

    <a-entity>
      <a-camera look-controls wasd-controls="acceleration: 100" position="0 13 13">
        <a-cursor></a-cursor>
      </a-camera>
  
    </a-entity>
    <a-entity id="Gumi" mmd="audio:https://cdn.rawgit.com/mrdoob/three.js/r87/examples/models/mmd/audios/wavefile_short.mp3;
                     audioDelayTime:5.333333333333333; afterglow:2.0;">
                     <a-entity mmd-model="model:Gumi/GUMI.pmx;
                     vmd:HIBIKASE.vmd;
                     physics:true;" shadow="cast:false" position="0 0 0"></a-entity>
                     
    </a-entity>

    <a-entity mmd="audio:https://cdn.rawgit.com/mrdoob/three.js/r87/examples/models/mmd/audios/wavefile_short.mp3;
                     audioDelayTime:5.333333333333333; afterglow:2.0;">
      <a-entity mmd-model="model:MIKU/MIKU.pmx;
                             vmd:PatchworkStaccato.vmd;
                             physics:true;" shadow="cast:false" position="0 0 0"></a-entity>
    </a-entity>

    <a-entity geometry="primitive:box" material="color: green" position="0 8 0" scale="5 5 5" killme>
      
    </a-entity>

    
    <a-plane rotation="-90 0 0" color="#AAAAAA" height="200" width="200" shadow="receive:false"></a-plane>

    <a-sky src="#sky"></a-sky>

    <a-entity light="type:directional;
                       castShadow:false;
                       color:#888;
                       shadowMapWidth:1024;
                       shadowMapHeight:1024;
                       shadowCameraRight:20;
                       shadowCameraTop:20;
                       shadowCameraLeft:-20;
                       shadowCameraBottom:-20" position="-20 20 20"></a-entity>
  </a-scene>
</body>
<script>
  function killme(){
    var el = document.querySelector("#Gumi");
    el.setAttribute("visible", "false");
  }
  AFRAME.registerComponent('killme', {
    init: function () {
        var el = this.el;
        var gumi = document.querySelector("#Gumi");

        el.addEventListener('click', function () {
            gumi.setAttribute('visible', !gumi.getAttribute('visible'));
        });
    }
});
</script>
</html>